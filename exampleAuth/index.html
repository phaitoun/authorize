<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
   
    <div>
        Email <input type="text" name="email"> 
      </div>
      <div>
        Password <input type="password" name="password">
      </div>
      <button onclick="submitLogin()">Login</button>
      <button onclick="callUsers()">Call API users</button>
      <div id="content"></div>
      <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/1.4.0/axios.min.js"></script>
      <script>
        const submitLogin = async () => {
          const email = document.querySelector('input[name=email]').value
          const password = document.querySelector('input[name=password]').value
          
          console.log('email', email)
          console.log('password', password)
    
          try {
            const response = await axios.post('http://localhost:8000/api/login', {
              email,
              password
            })
            localStorage.setItem('token',response.data.token)
            console.log(response.data.token)
          } catch (error) {
            console.log('error', error)
          }
        }
        const callUsers = async () => {
          try {
            let contentDOM = document.getElementById('content')
            const token = localStorage.getItem('token')
            const response = await axios.get('http://localhost:8000/users',
            {
                headers: {
                    'authorization' : `Bearer ${token}`
                }
            }
            )
            console.log(response.data)
            
          } catch (error) {
            console.log('error', error)
          }
        }
      </script>
   
   
   
   
   
   

   
   
   
   
   
   
</body>
</html>